(function(a){if(typeof exports==="object"){module.exports=a(require)}else{if(typeof define==="function"){define(a)}else{window.dialog=a()}}})(function(d){var a=$(window),e=$("html"),f=$(document.body),b=Object.prototype.toString,k=Array.prototype.slice;var h=function(l){if(!(this instanceof h)){return new h()}var m=this;this.options=$.extend({html:"",skin:"",width:400,height:"auto",isOverlay:true,closeBtn:true,closeHandle:"remove",isHasTitle:true,isSetMax:true,isLookScreen:true,zIndex:99999},l||{});this.overlayElement=null;this._createDOM();this._hotKeyEvent=function(o){var n=o.keyCode;if(n===27){m.remove()}};this._refresh=function(){m.options.height==="100%"&&m.$frame.height(a.height());m.overlayElement&&m.overlayElement.height(m.getBodyHeight());m.options.isSetMax&&m.setMaxHeight();m.posUpdate()}};h.prototype={constructor:h,_createDOM:function(){var n=new Date().getTime(),m="J_Dialog"+n,l=this.options.html?this.options.html:'<div class="ui-dialog-title J_DialogTitle">提示</div>'+'<div class="ui-dialog-content J_DialogContent"></div>'+'<div class="ui-dialog-close">'+'<a href="javascript:;" class="J_DialogClose">&times;</a>'+"</div>"+'<div class="ui-dialog-btns J_DialogBtns"></div>';this.$frame=$("<div>").css({"width":this.options.width,"height":this.options.height!=="100%"?this.options.height:a.height(),"position":"fixed","top":"-9999em","left":"-9999em","z-index":this.options.zIndex}).attr({"class":"ui-dialog-layout "+this.options.skin,"id":m}).appendTo(f).html(l);this._$J_DialogTitle=this.$frame.find(".J_DialogTitle");this._$J_DialogContent=this.$frame.find(".J_DialogContent");this._$J_DialogClose=this.$frame.find(".J_DialogClose");this._$J_DialogBtns=this.$frame.find(".J_DialogBtns");if(!this.options.closeBtn){this._$J_DialogClose.hide()}if(!this.options.isHasTitle){this._$J_DialogTitle.hide()}},showCloseBtn:function(){this._$J_DialogClose.show()},_eventHandle:function(){var l=this;this._$J_DialogClose.on("click",function(){if(l.options.closeHandle==="remove"){l.remove();l.options.closeCb&&l.options.closeCb()}else{l.hide()}});a.on("resize",this._refresh);if(this.options.closeRefresh){a.off("resize",this._refresh)}},getBodyWidth:function(){var m=f.outerWidth(),l=a.width();return Math.max(m,l)},getBodyHeight:function(){var m=f.outerHeight(),l=a.height();return Math.max(m,l)},createOverlay:function(n){var o=this,m=$.extend({opacity:0.8,bgColor:"#000",zIndex:this.options.zIndex-1},n||{}),l=$("<div>").css({position:"absolute",top:0,left:0,"z-index":m.zIndex,"background-color":m.bgColor,opacity:m.opacity,width:o.getBodyWidth(),height:o.getBodyHeight()});if(!this.overlayElement){l.appendTo(f);this.overlayElement=l}return this},removeOverlay:function(){if(this.overlayElement){this.overlayElement.remove();this.overlayElement=null}return this},setHtml:function(l){this.$frame.html(l);return this},setTitle:function(l){this._$J_DialogTitle.html(l);return this},setContent:function(l){this._$J_DialogContent.html(l);return this},addBtns:function(n){var o=this,l=k.call(arguments,1),m="";if(b.call(n)==="[object String]"){m='<a href="javascript:;">'+n+"</a>"}else{if(b.call(n)==="[object Object]"){m='<a href="javascript:;" class="'+n.className+'">'+n.text+"</a>"}else{if(b.call(n)==="[object Array]"){n.forEach(function(p){if(b.call(p)==="[object String]"){m+='<a href="javascript:;">'+p+"</a>"}else{if(b.call(p)==="[object Object]"){m+='<a href="javascript:;" class="'+p.className+'">'+p.text+"</a>"}else{throw new Error("param btn typeError.")}}})}else{throw new Error("param btn typeError.")}}}$(m).appendTo(this._$J_DialogBtns).each(function(p,q){$(q).on("click",function(){l[p]&&$.isFunction(l[p])&&l[p].call(o)})}).eq(0).focus();this._$J_DialogBtns.show();return this},show:function(l){if(this.options.isOverlay){this.createOverlay()}if(this.options.isLookScreen){this.lookScreen()}this.options.isSetMax&&this.setMaxHeight();this.posUpdate();this.$frame.fadeIn();this._eventHandle();l&&l.call(this);return this},hide:function(l){if(this.options.isOverlay){this.removeOverlay()}if(this.options.isLookScreen){this.unLookScreen()}this.$frame.hide();a.off("resize",this._refresh);f.off("keyup",this._hotKeyEvent);l&&l.call(this);return this},remove:function(l){if(this.options.isOverlay){this.removeOverlay()}if(this.options.isLookScreen){this.unLookScreen()}this.$frame.remove();a.off("resize",this._refresh);f.off("keyup",this._hotKeyEvent);l&&l.call(this);this.options.removeCb&&this.options.removeCb.call(this);return this},posUpdate:function(l,m){l=l||parseInt((f.width()-this.$frame.width())/2);m=m||parseInt((window.innerHeight-this.$frame.height())/2);this.$frame.css({top:m,left:l});return this},setMaxHeight:function(l,m){this._$J_DialogContent.css({"max-height":l||this.getMaxHeight(),"overflow-y":m||"auto"})},getMaxHeight:function(){var m=$(window).height(),l=(this.options.isHasTitle&&this._$J_DialogTitle.outerHeight())||0,n=this._$J_DialogBtns.outerHeight()||0;return m-l-n-10},getScrollbarWidth:function(){var o=document.createElement("p"),n={width:"100px",height:"100px",overflowY:"scroll"},l,m;
    for(l in n){o.style[l]=n[l]}document.body.appendChild(o);m=o.offsetWidth-o.clientWidth;$(o).remove();return m},lookScreen:function(){e.css("overflow","hidden");f.css("border-right",this.getScrollbarWidth()+"px solid transparent")},unLookScreen:function(){e.css("overflow","auto");f.css("border-right","none")}};var c=function(n){var m=k.call(arguments,1),l=m[0]==="[object Object]"?m.shift():{},l=$.extend({closeBtn:false,zIndex:999999},l),o=new h(l);o.setContent('<div style="padding: 20px;">'+n+"</div>").addBtns({text:"确定",className:"yes"},function(){this.remove();m[0]&&$.isFunction(m[0])&&m[0].call(this)}).show()};var g=function(n){var m=k.call(arguments,1),l=m[0]==="[object Object]"?m.shift():{},l=$.extend({closeBtn:false,zIndex:999999},l),o=new h(l);o.setContent('<div style="padding: 20px;">'+n+"</div>").addBtns([{text:"确定",className:"yes"},{text:"取消",className:"no"}],function(){this.remove();m[0]&&$.isFunction(m[0])&&m[0].call(this,true)},function(){this.remove();m[1]&&$.isFunction(m[1])&&m[1].call(this);!m[1]&&$.isFunction(m[0])&&m[0].call(this,false)}).show()};var i=function(l){var l=l||"加载中...";this.html='<div class="gif-icon"></div><p>'+l+"</p>";this._dialog=null};i.prototype={show:function(){if(!this._dialog){this._dialog=new h({skin:"ui-dialog-loading",html:this.html,width:300,zIndex:999999}).show()}return this},remove:function(){if(this._dialog){this._dialog.remove();this._dialog=null}}};var j=function(l){var l=l||"加载中...";this.html=$('<div class="dialog-tip">'+l+"</div>")};j.prototype={show:function(l){var m=this;$(document.body).append(m.html);setTimeout(function(){m.remove()},l||3000);return this},remove:function(){var l=this;this.html.fadeOut(function(){l.html.remove()})}};return{layer:function(l){return new h(l)},alert:c,confirm:g,loading:function(l){return new i(l)},tip:function(l){return new j(l)}}});